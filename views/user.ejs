<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Особистий кабінет</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/ai_assistant.css">
    <link rel="stylesheet" href="/css/user.css">
</head>
<body>
    <%- include('blocks/header') -%>
    
    <main>
        <div class="account-container">
            <div id="loadingMessage" class="loading">
                Завантаження даних...
            </div>
            
            <div id="errorMessage" class="error-message" style="display: none;">
                Помилка завантаження даних користувача
            </div>

            <div id="userContent" style="display: none;">
                <!-- Заголовок профілю -->
                <div class="profile-header">
                    <div class="profile-photo">
                        <img id="profileImage" src="images/male.svg" alt="Фото профілю">
                    </div>
                    <div class="profile-info">
                        <h1 id="fullName">Ім'я користувача</h1>
                        <div class="info-row">
                            <span class="info-label">ID користувача:</span>
                            <span id="userId" class="info-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Статистика -->
                <div class="profile-stats">
                    <div class="stat-card">
                        <p>Член клубу з</p>
                        <h3 id="memberSince">2023</h3>
                    </div>
                    <div class="stat-card">
                        <p>Всього тренувань</p>
                        <h3 id="totalTrainings">0</h3>
                    </div>
                </div>

                <!-- Бонусна картка -->
                <div class="bonus-card-large">
                    <div class="bonus-content">
                        <h2>Ваші бонуси</h2>
                        <div class="bonus-amount" id="bonusBalance">0</div>
                        <p class="bonus-description">Обмінюйте бонуси на одяг, обладнання, аксесуари та абонементи в бонусному магазині</p>
                    </div>
                    <div class="bonus-progress-section">
                        <div class="progress-label">
                            <span>Прогрес цього місяця</span>
                            <span id="progressPercentText">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="monthProgress" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <p class="progress-hint"><span id="currentVisits">0</span> з 20 відвідувань</p>
                    </div>
                </div>

                <!-- Основний контент -->
                <div class="info-card info-card-single">
                    <h2>Особиста інформація</h2>
                    <div class="info-row">
                        <span class="info-label">Ім'я користувача:</span>
                        <span id="username" class="info-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Стать:</span>
                        <span id="gender" class="info-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span id="email" class="info-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Телефон:</span>
                        <span id="phone" class="info-value">-</span>
                    </div>
                </div>

                <!-- Дії -->
                <div class="actions-grid">
                    <button class="action-btn" onclick="editProfile()">
                        Редагувати профіль
                    </button>
                    <button class="action-btn" onclick="bookTraining()">
                        Записатися на тренування
                    </button>
                    <button class="action-btn" onclick="viewHistory()">
                        Історія відвідувань
                    </button>
                    <button class="action-btn secondary" onclick="logout()">
                        Вийти з акаунту
                    </button>
                </div>
            </div>
        </div>

        <!-- Модальне вікно для редагування профілю -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Редагувати профіль</h2>
                    <span class="close">&times;</span>
                </div>

                <div class="success-message" id="successMessage">
                    Профіль успішно оновлено!
                </div>

                <form id="editForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFirstName">Ім'я:</label>
                            <input type="text" id="editFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="editLastName">Прізвище:</label>
                            <input type="text" id="editLastName" name="lastName" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editUsername">Ім'я користувача:</label>
                            <input type="text" id="editUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="editGender">Стать:</label>
                            <select id="editGender" name="gender" required>
                                <option value="male">Чоловік</option>
                                <option value="female">Жінка</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmail">Email:</label>
                            <input type="email" id="editEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="editPhone">Телефон:</label>
                            <input type="tel" id="editPhone" name="phone" placeholder="+38 (0XX) XXX-XX-XX">
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">Скасувати</button>
                        <button type="submit" class="btn btn-primary">Зберегти зміни</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <%- include('blocks/footer') -%>
    <%- include('blocks/ai_assistant') -%>

    <script src="/js/user.js"></script>
</body>
</html>