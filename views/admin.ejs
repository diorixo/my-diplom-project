<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è - –°–ø–æ—Ä—Ç–∏–≤–Ω–∏–π —Ü–µ–Ω—Ç—Ä</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <%- include('blocks/header') -%>

    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#users" class="nav-item active" data-section="users">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</span>
                </a>
                <a href="#chat-stats" class="nav-item" data-section="chat-stats">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç—É</span>
                </a>
                <a href="#analytics" class="nav-item" data-section="analytics">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="20" x2="12" y2="10"></line>
                        <line x1="18" y1="20" x2="18" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="16"></line>
                    </svg>
                    <span>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Users Section -->
            <section id="users-section" class="content-section active">
                <div class="section-header">
                    <h1>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏</h1>
                    <div class="search-box">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" id="user-search" placeholder="–ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤...">
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon user-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-users">0</div>
                            <div class="stat-label">–í—Å—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon trainer-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <polyline points="17 11 19 13 23 9"></polyline>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-trainers">0</div>
                            <div class="stat-label">–¢—Ä–µ–Ω–µ—Ä—ñ–≤</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon admin-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-admins">0</div>
                            <div class="stat-label">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤</div>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</th>
                                <th>Email</th>
                                <th>–†–æ–ª—å</th>
                                <th>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</th>
                                <th>–î—ñ—ó</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Filled by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination">
                    <button class="pagination-btn" id="prev-page" disabled>–ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
                    <span class="pagination-info">
                        –°—Ç–æ—Ä—ñ–Ω–∫–∞ <span id="current-page">1</span> –∑ <span id="total-pages">1</span>
                    </span>
                    <button class="pagination-btn" id="next-page">–ù–∞—Å—Ç—É–ø–Ω–∞</button>
                </div>
            </section>

            <!-- Chat Statistics Section -->
            <section id="chat-stats-section" class="content-section">
                <div class="section-header">
                    <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç-–±–æ—Ç–∞</h1>
                    <select id="stats-period" class="period-select">
                        <option value="today">–°—å–æ–≥–æ–¥–Ω—ñ</option>
                        <option value="week">–¶–µ–π —Ç–∏–∂–¥–µ–Ω—å</option>
                        <option value="month">–¶–µ–π –º—ñ—Å—è—Ü—å</option>
                    </select>
                </div>
            
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon chat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-sessions">0</div>
                            <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω–∏—Ö —Å–µ—Å—ñ–π</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon message-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-messages">0</div>
                            <div class="stat-label">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon rating-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="avg-satisfaction">0%</div>
                            <div class="stat-label">–†—ñ–≤–µ–Ω—å –∑–∞–¥–æ–≤–æ–ª–µ–Ω–æ—Å—Ç—ñ (üëç)</div>
                        </div>
                    </div>
                </div>
            
                <div class="chart-container">
                    <h3>–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–∞ –ø–µ—Ä—ñ–æ–¥</h3>
                    <canvas id="activity-chart"></canvas>
                </div>
            
                <div class="two-column-grid">
                    <div class="info-card">
                        <h3>–ü–æ–ø—É–ª—è—Ä–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è</h3>
                        <div id="popular-questions" class="questions-list">
                            <!-- Filled by JavaScript -->
                        </div>
                    </div>
                    <div class="info-card">
                        <h3>–û—Å—Ç–∞–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫–∏</h3>
                        <div id="recent-feedback" class="feedback-list">
                            <!-- Filled by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="content-section">
                <div class="section-header">
                    <h1>–î–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</h1>
                    <button class="export-btn" id="export-data">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ
                    </button>
                </div>

                <div class="insights-container">
                    <h3>–Ü–Ω—Å–∞–π—Ç–∏ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</h3>
                    <div id="insights-list" class="insights-list">
                        <!-- Filled by JavaScript -->
                    </div>
                </div>

                <div class="two-column-grid">
                    <div class="info-card">
                        <h3>–î–∂–µ—Ä–µ–ª–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π</h3>
                        <canvas id="source-chart"></canvas>
                    </div>
                    <div class="info-card">
                        <h3>–ê–∫—Ç–∏–≤–Ω—ñ —Å–µ—Å—ñ—ó</h3>
                        <div class="active-sessions-value" id="active-sessions-count">0</div>
                        <div class="sessions-indicator">
                            <div class="indicator-dot active"></div>
                            <span>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –æ–Ω–ª–∞–π–Ω –∑–∞—Ä–∞–∑</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Role Change Modal -->
    <div id="role-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ó–º—ñ–Ω–∞ —Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
                <button class="modal-close" id="close-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="user-info">
                    <strong>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:</strong> <span id="modal-user-name"></span>
                </div>
                <div class="form-group">
                    <label for="new-role">–ù–æ–≤–∞ —Ä–æ–ª—å:</label>
                    <select id="new-role" class="role-select">
                        <option value="user">User (–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á)</option>
                        <option value="trainer">Trainer (–¢—Ä–µ–Ω–µ—Ä)</option>
                        <option value="admin">Admin (–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)</option>
                    </select>
                </div>
                <div class="role-descriptions">
                    <div class="role-desc">
                        <strong>User:</strong> –ë–∞–∑–æ–≤—ñ –ø—Ä–∞–≤–∞, –º–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—å
                    </div>
                    <div class="role-desc">
                        <strong>Trainer:</strong> –ú–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ —Å–≤–æ—ó–º–∏ –≥—Ä—É–ø–∞–º–∏
                    </div>
                    <div class="role-desc">
                        <strong>Admin:</strong> –ü–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π —Å–∏—Å—Ç–µ–º–∏
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-role-change">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button class="btn btn-primary" id="confirm-role-change">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>