<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/visit_history.css">
</head>
<body style="
    background-image: url('/images/background/back.jpg');
    background-attachment: fixed; 
    background-size: cover; 
    background-repeat: no-repeat;
    background-position: center center;
    min-height: 100vh;
">
    <%- include('blocks/header') -%>
    
    <main>
        <div class="history-container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="page-header">
                <h1>üìä –Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å</h1>
                <p>–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –≤—Å—ñ –≤–∞—à—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                        <div class="stat-info">
                            <h3 id="totalVisits">0</h3>
                            <p>–í—Å—å–æ–≥–æ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-info">
                            <h3 id="totalHours">0</h3>
                            <p>–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å —Ç—Ä–µ–Ω—É–≤–∞–Ω—å</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <h3 id="currentMonth">0</h3>
                            <p>–¶—å–æ–≥–æ –º—ñ—Å—è—Ü—è</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-info">
                            <h3 id="streak">0</h3>
                            <p>–î–Ω—ñ–≤ –ø–æ—Å–ø—ñ–ª—å</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –§—ñ–ª—å—Ç—Ä–∏ -->
            <div class="filters-section">
                <h2>üîç –§—ñ–ª—å—Ç—Ä–∏</h2>
                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="periodFilter">–ü–µ—Ä—ñ–æ–¥:</label>
                        <select id="periodFilter">
                            <option value="all">–í–µ—Å—å —á–∞—Å</option>
                            <option value="current-month">–ü–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å</option>
                            <option value="last-month">–ú–∏–Ω—É–ª–∏–π –º—ñ—Å—è—Ü—å</option>
                            <option value="last-3-months">–û—Å—Ç–∞–Ω–Ω—ñ 3 –º—ñ—Å—è—Ü—ñ</option>
                            <option value="current-year">–ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–∫</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="typeHistoryFilter">–¢–∏–ø —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:</label>
                        <select id="typeHistoryFilter">
                            <option value="">–í—Å—ñ –≤–∏–¥–∏</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="trainerHistoryFilter">–¢—Ä–µ–Ω–µ—Ä:</label>
                        <select id="trainerHistoryFilter">
                            <option value="">–í—Å—ñ —Ç—Ä–µ–Ω–µ—Ä–∏</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="statusFilter">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="statusFilter">
                            <option value="">–í—Å—ñ —Å—Ç–∞—Ç—É—Å–∏</option>
                            <option value="completed">–í—ñ–¥–≤—ñ–¥–∞–Ω–æ</option>
                            <option value="missed">–ü—Ä–æ–ø—É—â–µ–Ω–æ</option>
                            <option value="cancelled">–°–∫–∞—Å–æ–≤–∞–Ω–æ</option>
                        </select>
                    </div>
                </div>
                <button class="apply-filters-btn" onclick="applyHistoryFilters()">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
            </div>

            <!-- –Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å -->
            <div class="history-section">
                <div class="section-header">
                    <h2>üìã –Ü—Å—Ç–æ—Ä—ñ—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å</h2>
                    <div class="view-options">
                        <button class="view-btn active" onclick="setHistoryView('list')">üìã –°–ø–∏—Å–æ–∫</button>
                        <button class="view-btn" onclick="setHistoryView('calendar')">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä</button>
                    </div>
                </div>

                <div id="loadingHistory" class="loading">
                    –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó...
                </div>

                <div id="historyContent" style="display: none;">
                    <!-- –°–ø–∏—Å–æ–∫ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å -->
                    <div id="historyList" class="history-list">
                        <!-- –ó–∞–ø–∏—Å–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                    </div>

                    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏–π –≤–∏–≥–ª—è–¥ -->
                    <div id="calendarView" class="calendar-view" style="display: none;">
                        <div class="calendar-navigation">
                            <button class="nav-btn" onclick="changeMonth(-1)">‚Üê</button>
                            <span id="currentMonthDisplay">–ü–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å</span>
                            <button class="nav-btn" onclick="changeMonth(1)">‚Üí</button>
                        </div>
                        <div id="calendarGrid" class="calendar-grid">
                            <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä –±—É–¥–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                        </div>
                    </div>
                </div>

                <!-- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è -->
                <div id="pagination" class="pagination" style="display: none;">
                    <button id="prevPage" class="page-btn" onclick="changePage(-1)">‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
                    <span id="pageInfo" class="page-info">–°—Ç–æ—Ä—ñ–Ω–∫–∞ 1 –∑ 1</span>
                    <button id="nextPage" class="page-btn" onclick="changePage(1)">–ù–∞—Å—Ç—É–ø–Ω–∞ ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
        <div id="detailModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìù –î–µ—Ç–∞–ª—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
                    <span class="close" onclick="closeDetailModal()">&times;</span>
                </div>

                <div id="trainingDetails" class="training-details-modal">
                    <!-- –î–µ—Ç–∞–ª—ñ –±—É–¥—É—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                </div>

                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeDetailModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –æ—Ü—ñ–Ω–∫–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
        <div id="ratingModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚≠ê –û—Ü—ñ–Ω—ñ—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
                    <span class="close" onclick="closeRatingModal()">&times;</span>
                </div>

                <form id="ratingForm">
                    <div class="rating-section">
                        <h3 id="ratingTrainingName">–ù–∞–∑–≤–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h3>
                        <div class="rating-stars">
                            <span class="star" data-rating="1">‚≠ê</span>
                            <span class="star" data-rating="2">‚≠ê</span>
                            <span class="star" data-rating="3">‚≠ê</span>
                            <span class="star" data-rating="4">‚≠ê</span>
                            <span class="star" data-rating="5">‚≠ê</span>
                        </div>
                        <p id="ratingText">–û–±–µ—Ä—ñ—Ç—å –æ—Ü—ñ–Ω–∫—É</p>
                    </div>

                    <div class="form-group">
                        <label for="reviewText">–í—ñ–¥–≥—É–∫ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
                        <textarea id="reviewText" name="review" rows="4" placeholder="–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è –≤–∞—à–∏–º–∏ –≤—Ä–∞–∂–µ–Ω–Ω—è–º–∏ –ø—Ä–æ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è..."></textarea>
                    </div>

                    <div class="modal-buttons">
                        <button type="button" class="btn btn-secondary" onclick="closeRatingModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="submit" class="btn btn-primary">–ó–∞–ª–∏—à–∏—Ç–∏ –æ—Ü—ñ–Ω–∫—É</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <%- include('blocks/footer') -%>

    <script src="/js/visit_history.js"></script>
</body>
</html>