<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è–º–∏</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/manage_trainings.css">
</head>
<body>
    <%- include('blocks/header') -%>
    
    <main>
        <div class="trainings-container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="page-header">
                <h1>üìÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è–º–∏</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="openAddTrainingModal()">
                        ‚ûï –î–æ–¥–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                    </button>
                    <a href="/trainer" class="btn btn-secondary">
                        üîô –ù–∞–∑–∞–¥ –¥–æ –ø—Ä–æ—Ñ—ñ–ª—é
                    </a>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('active')">
                        ‚úÖ –ê–∫—Ç–∏–≤–Ω—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                    </button>
                    <button class="tab-btn" onclick="switchTab('completed')">
                        üìã –ó–∞–≤–µ—Ä—à–µ–Ω—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                    </button>
                </div>
            </div>

            <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
            <div id="loadingMessage" class="loading">
                –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å...
            </div>

            <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É -->
            <div id="errorMessage" class="error-message" style="display: none;">
                –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
            </div>

            <!-- –ê–∫—Ç–∏–≤–Ω—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
            <div id="activeTrainings" class="trainings-section">
                <div class="trainings-grid" id="activeTrainingsGrid">
                    <!-- –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                </div>
            </div>

            <!-- –ó–∞–≤–µ—Ä—à–µ–Ω—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
            <div id="completedTrainings" class="trainings-section" style="display: none;">
                <div class="trainings-grid" id="completedTrainingsGrid">
                    <!-- –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
        <div id="trainingModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">‚ûï –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
                    <span class="close">&times;</span>
                </div>

                <div class="success-message" id="trainingSuccessMessage">
                    –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!
                </div>

                <form id="trainingForm">
                    <input type="hidden" id="trainingId" name="trainingId">
                    
                    <div class="form-group">
                        <label for="trainingName">–ù–∞–∑–≤–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:</label>
                        <input type="text" id="trainingName" name="name" required 
                               placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –°–∏–ª–æ–≤–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="categoryId">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                            <select id="categoryId" name="categoryId" required>
                                <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
                                <!-- –û–ø—Ü—ñ—ó –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="duration">–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Ö–≤):</label>
                            <input type="number" id="duration" name="duration" required 
                                   min="15" max="180" placeholder="60">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="price">–¶—ñ–Ω–∞ (‚Ç¥):</label>
                            <input type="number" id="price" name="price" required 
                                   min="0" max="5000" placeholder="300">
                        </div>
                        <div class="form-group">
                            <label for="maxParticipants">–ú–∞–∫—Å. —É—á–∞—Å–Ω–∏–∫—ñ–≤:</label>
                            <input type="number" id="maxParticipants" name="maxParticipants" required 
                                   min="1" max="50" placeholder="10">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="trainingDate">–î–∞—Ç–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:</label>
                            <input type="date" id="trainingDate" name="date" required>
                        </div>
                        <div class="form-group">
                            <label for="trainingTime">–ß–∞—Å —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:</label>
                            <input type="time" id="trainingTime" name="time" required>
                        </div>
                    </div>


                    <div class="modal-buttons">
                        <button type="button" class="btn btn-secondary" onclick="closeTrainingModal()">
                            –°–∫–∞—Å—É–≤–∞—Ç–∏
                        </button>
                        <button type="submit" class="btn btn-primary">
                            üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —É—á–∞—Å–Ω–∏–∫—ñ–≤ -->
        <div id="participantsModal" class="modal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 id="participantsModalTitle">üë• –£—á–∞—Å–Ω–∏–∫–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
                    <span class="close" onclick="closeParticipantsModal()">&times;</span>
                </div>

                <div class="participants-info">
                    <div class="info-stats">
                        <div class="stat-item">
                            <span class="stat-label">–ó–∞–ø–∏—Å–∞–Ω–æ:</span>
                            <span id="totalParticipants" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ü—Ä–∏–π—à–ª–æ:</span>
                            <span id="attendedParticipants" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ù–µ –ø—Ä–∏–π—à–ª–æ:</span>
                            <span id="notAttendedParticipants" class="stat-value">0</span>
                        </div>
                    </div>
                </div>

                <div class="participants-list" id="participantsList">
                    <!-- –£—á–∞—Å–Ω–∏–∫–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                </div>

                <div class="modal-buttons">
                    <button type="button" class="btn btn-primary" onclick="saveAttendance()">
                        üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—ñ—Å—Ç—å
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeParticipantsModal()">
                        –ó–∞–∫—Ä–∏—Ç–∏
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è -->
        <div id="deleteModal" class="modal">
            <div class="modal-content small">
                <div class="modal-header">
                    <h2>üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</h2>
                    <span class="close" onclick="closeDeleteModal()">&times;</span>
                </div>

                <div class="delete-warning">
                    <p>–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è?</p>
                    <p class="warning-text">–¶—è –¥—ñ—è –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–∞!</p>
                    <p id="deleteTrainingName" class="training-name"></p>
                </div>

                <div class="modal-buttons">
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                        üóëÔ∏è –¢–∞–∫, –≤–∏–¥–∞–ª–∏—Ç–∏
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">
                        –°–∫–∞—Å—É–≤–∞—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </main>

    <%- include('blocks/footer') -%>

    <script src="/js/manage_trainings.js"></script>
</body>
</html>